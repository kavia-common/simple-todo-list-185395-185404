{"is_source_file": true, "format": "Python", "description": "This is a Python source file defining a FastAPI backend API for a Todo application, including database setup, data models, API endpoints, and app initialization.", "external_files": ["os", "typing", "fastapi", "pydantic", "sqlalchemy"], "external_methods": ["fastapi.FastAPI", "fastapi.HTTPException", "fastapi.status", "fastapi.middleware.cors.CORSMiddleware", "pydantic.BaseModel", "pydantic.Field", "sqlalchemy.create_engine", "sqlalchemy.orm.declarative_base", "sqlalchemy.orm.sessionmaker", "sqlalchemy.orm.Session"], "published": ["app", "init_db", "get_db", "health_check"], "classes": [{"name": "TodoORM", "description": "SQLAlchemy ORM model for Todo items."}, {"name": "TodoBase", "description": "Pydantic base schema for Todo."}, {"name": "TodoCreate", "description": "Pydantic schema for creating a Todo."}, {"name": "TodoUpdate", "description": "Pydantic schema for updating a Todo."}, {"name": "TodoOut", "description": "Pydantic response schema including Todo ID."}], "methods": [{"name": "None init_db()", "description": "Creates database tables and seeds initial data if empty.", "scope": "", "scopeKind": ""}, {"name": "Session get_db()", "description": "Yields a database session for dependency injection.", "scope": "", "scopeKind": ""}, {"name": "dict health_check()", "description": "A health check endpoint returning a simple message.", "scope": "", "scopeKind": ""}, {"name": "TodoOut create_todo(payload: TodoCreate)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "None delete_todo(todo_id: int)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "TodoOut get_todo(todo_id: int)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "TodoORM get_todo_or_404(db: Session, todo_id: int)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "List[TodoOut] list_todos()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "TodoOut toggle_todo(todo_id: int)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "TodoOut update_todo(todo_id: int, payload: TodoUpdate)", "scope": "", "scopeKind": "", "description": "unavailable"}], "calls": ["create_engine", "sessionmaker", "declarative_base", "Base.metadata.create_all", "db.query", "db.add", "db.commit", "db.refresh", "db.delete", "uvicorn.run"], "search-terms": ["FastAPI", "TodoORM", "SQLAlchemy", "CRUD API", "Database initialization", "API endpoints", "Uvicorn", "database URL", "sessionmaker", "health endpoint"], "state": 2, "file_id": 4, "knowledge_revision": 16, "git_revision": "8ef24f704504bc10fd0d67dde20d23ac14cafa29", "revision_history": [{"9": "e008efed3b6496a102afc99f5a68a9c052eb7698"}, {"10": "e008efed3b6496a102afc99f5a68a9c052eb7698"}, {"16": "8ef24f704504bc10fd0d67dde20d23ac14cafa29"}], "ctags": [{"_type": "tag", "name": "Base", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^Base = declarative_base()$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "Config", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^    class Config:$/", "language": "Python", "kind": "class", "scope": "TodoOut", "scopeKind": "class"}, {"_type": "tag", "name": "DB_FILE", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^DB_FILE = os.environ.get(\"SQLITE_DB\", os.path.join(os.path.dirname(__file__), \"..\", \"..\", \"todo./", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "DB_FILE", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^DB_FILE = os.path.abspath(DB_FILE)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "DB_URL", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^DB_URL = f\"sqlite:\\/\\/\\/{DB_FILE}\"$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "SessionLocal", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "TodoBase", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^class TodoBase(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TodoCreate", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^class TodoCreate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TodoORM", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^class TodoORM(Base):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TodoOut", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^class TodoOut(TodoBase):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "TodoUpdate", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^class TodoUpdate(BaseModel):$/", "language": "Python", "kind": "class"}, {"_type": "tag", "name": "__tablename__", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^    __tablename__ = \"todos\"$/", "file": true, "language": "Python", "kind": "variable", "scope": "TodoORM", "scopeKind": "class"}, {"_type": "tag", "name": "app", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^app = FastAPI($/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "completed", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^    completed = Column(Boolean, default=False, nullable=False)$/", "language": "Python", "kind": "variable", "scope": "TodoORM", "scopeKind": "class"}, {"_type": "tag", "name": "completed", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^    completed: bool = Field(..., description=\"Completion status of the todo\")$/", "language": "Python", "typeref": "typename:bool", "kind": "variable", "scope": "TodoUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "completed", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^    completed: bool = Field(default=False, description=\"Completion status of the todo\")$/", "language": "Python", "typeref": "typename:bool", "kind": "variable", "scope": "TodoBase", "scopeKind": "class"}, {"_type": "tag", "name": "create_todo", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^def create_todo(payload: TodoCreate) -> TodoOut:$/", "language": "Python", "typeref": "typename:TodoOut", "kind": "function", "signature": "(payload: TodoCreate)"}, {"_type": "tag", "name": "delete_todo", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^def delete_todo(todo_id: int) -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "(todo_id: int)"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^    description = Column(String, nullable=True)$/", "language": "Python", "kind": "variable", "scope": "TodoORM", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^    description: Optional[str] = Field(default=None, description=\"Optional description for the t/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "TodoBase", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^    description: Optional[str] = Field(default=None, description=\"Optional description for the t/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "TodoCreate", "scopeKind": "class"}, {"_type": "tag", "name": "description", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^    description: Optional[str] = Field(default=None, description=\"Optional description for the t/", "language": "Python", "typeref": "typename:Optional[str]", "kind": "variable", "scope": "TodoUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "engine", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^engine = create_engine(DB_URL, connect_args={\"check_same_thread\": False})$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "from_attributes", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^        from_attributes = True$/", "language": "Python", "kind": "variable", "scope": "TodoOut.Config", "scopeKind": "class"}, {"_type": "tag", "name": "get_db", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^def get_db() -> Session:$/", "language": "Python", "typeref": "typename:Session", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "get_todo", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^def get_todo(todo_id: int) -> TodoOut:$/", "language": "Python", "typeref": "typename:TodoOut", "kind": "function", "signature": "(todo_id: int)"}, {"_type": "tag", "name": "get_todo_or_404", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^def get_todo_or_404(db: Session, todo_id: int) -> TodoORM:$/", "language": "Python", "typeref": "typename:TodoORM", "kind": "function", "signature": "(db: Session, todo_id: int)"}, {"_type": "tag", "name": "health_check", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^def health_check() -> dict:$/", "language": "Python", "typeref": "typename:dict", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^    id = Column(Integer, primary_key=True, index=True, autoincrement=True)$/", "language": "Python", "kind": "variable", "scope": "TodoORM", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^    id: int = Field(..., description=\"Unique identifier of the todo\")$/", "language": "Python", "typeref": "typename:int", "kind": "variable", "scope": "TodoOut", "scopeKind": "class"}, {"_type": "tag", "name": "init_db", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^def init_db() -> None:$/", "language": "Python", "typeref": "typename:None", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "list_todos", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^def list_todos() -> List[TodoOut]:$/", "language": "Python", "typeref": "typename:List[TodoOut]", "kind": "function", "signature": "()"}, {"_type": "tag", "name": "port", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^    port = int(os.environ.get(\"PORT\", \"3001\"))$/", "language": "Python", "kind": "variable"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^    title = Column(String, nullable=False)$/", "language": "Python", "kind": "variable", "scope": "TodoORM", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^    title: str = Field(..., description=\"Title of the todo\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TodoBase", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^    title: str = Field(..., description=\"Title of the todo\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TodoCreate", "scopeKind": "class"}, {"_type": "tag", "name": "title", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^    title: str = Field(..., description=\"Title of the todo\")$/", "language": "Python", "typeref": "typename:str", "kind": "variable", "scope": "TodoUpdate", "scopeKind": "class"}, {"_type": "tag", "name": "toggle_todo", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^def toggle_todo(todo_id: int) -> TodoOut:$/", "language": "Python", "typeref": "typename:TodoOut", "kind": "function", "signature": "(todo_id: int)"}, {"_type": "tag", "name": "update_todo", "path": "/home/kavia/workspace/code-generation/simple-todo-list-185395-185404/todo_app_backend/src/api/main.py", "pattern": "/^def update_todo(todo_id: int, payload: TodoUpdate) -> TodoOut:$/", "language": "Python", "typeref": "typename:TodoOut", "kind": "function", "signature": "(todo_id: int, payload: TodoUpdate)"}], "hash": "20596db59febfd620a32e98e1c7e8a5a", "format-version": 4, "code-base-name": "todo_app_backend", "filename": "todo_app_backend/src/api/main.py", "fields": [{"name": "Base = declarative_base()", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DB_FILE = os.environ.get(\"SQLITE_DB\", os.path.join(os.path.dirname(__file__), \"..\", \"..\", \"todo./", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DB_FILE = os.path.abspath(DB_FILE)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "DB_URL = f\"sqlite:\\/\\/\\/{DB_FILE}\"", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "SessionLocal = sessionmaker(autocommit=False, autoflush=False, bind=engine)", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "__tablename__ = \"todos\"", "scope": "TodoORM", "scopeKind": "class", "description": "unavailable"}, {"name": "app = FastAPI(", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "completed = Column(Boolean, default=False, nullable=False)", "scope": "TodoORM", "scopeKind": "class", "description": "unavailable"}, {"name": "bool completed", "scope": "TodoUpdate", "scopeKind": "class", "description": "unavailable"}, {"name": "description = Column(String, nullable=True)", "scope": "TodoORM", "scopeKind": "class", "description": "unavailable"}, {"name": "Optional[str] description", "scope": "TodoBase", "scopeKind": "class", "description": "unavailable"}, {"name": "engine = create_engine(DB_URL, connect_args={\"check_same_thread\": False})", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "from_attributes = True", "scope": "TodoOut.Config", "scopeKind": "class", "description": "unavailable"}, {"name": "id = Column(Integer, primary_key=True, index=True, autoincrement=True)", "scope": "TodoORM", "scopeKind": "class", "description": "unavailable"}, {"name": "int id", "scope": "TodoOut", "scopeKind": "class", "description": "unavailable"}, {"name": "port = int(os.environ.get(\"PORT\", \"3001\"))", "scope": "", "scopeKind": "", "description": "unavailable"}, {"name": "title = Column(String, nullable=False)", "scope": "TodoORM", "scopeKind": "class", "description": "unavailable"}, {"name": "str title", "scope": "TodoBase", "scopeKind": "class", "description": "unavailable"}]}